<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>DFTALK three.js サンプル</title>
</head>

<body>

<!-- three.jsを読み込む -->
<script type="text/javascript" src="three.min.js"></script>
<script type="text/javascript" src="ThreeCSG.js"></script>

<!-- カメラ操作用ライブラリを読み込む -->
<script src="https://rawgithub.com/mrdoob/three.js/master/examples/js/controls/OrbitControls.js"></script>

<script>
// ここにコードを書いていきます。
// シーンの作成 ------------------------------------------
var scene = new THREE.Scene();

// カメラの作成 ------------------------------------------
// fov: 画角(視野角)
var fov = 75;

var height = 600; // 縦幅
var width = 400; // 横幅
// aspect: アスペクト比、カメラで撮影したものの縦横比
var aspect = height/width;

// near： ニアークリップ、 カメラからの撮影開始位置、これより近いものは撮影しない
var near = 1;
// far: ファークリップ カメラからの撮影終了位置、これより遠いものは撮影しない
var far = 1000;

// カメラ作成
var camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
// カメラ配置
camera.position.set(-10, 40, 60); // (x, y, z)

// レンダラーの追加 ----------------------------------------
var renderer = new THREE.WebGLRenderer();
renderer.setSize(height, width); // Canvasのサイズ設定
document.body.appendChild(renderer.domElement);

var color = 'white';
var light = new THREE.AmbientLight(color);
scene.add( light );

var materialNormal = new THREE.MeshNormalMaterial();

//plane
var geometry = new THREE.CubeGeometry(130, 1, 130); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 'orange'});
plane = new THREE.Mesh(geometry, material);
plane.position.set(10, 0, 0);  // 位置を設定(x, y, z)
scene.add(plane); // シーンに追加

//wall_1
var wall1_geo = new THREE.CubeGeometry(10, 100, 130); // サイズ設定（x, y, z）
var wall1_mat = new THREE.MeshPhongMaterial({color: 'black'});
var wall1_mesh = new THREE.Mesh(wall1_geo, wall1_mat);
wall1_mesh.position.set(-50, 50, 0);  // 位置を設定(x, y, z)
var wall1_bsp = new ThreeBSP(wall1_mesh);

var wall1clo_geo = new THREE.CubeGeometry(15, 50, 50); // サイズ設定（x, y, z）
var wall1clo_mat = new THREE.MeshPhongMaterial({color: 'green'});
var wall1clo_mesh= new THREE.Mesh(wall1clo_geo, wall1clo_mat);
wall1clo_mesh.position.set(-45, 25, 0);  // 位置を設定(x, y, z)
var wall1clo_bsp = new ThreeBSP(wall1clo_mesh);

var newBSP = wall1_bsp.subtract(wall1clo_bsp);
//var wall1_mat = new THREE.MeshPhongMaterial({color: 0x52A2C5});
//var newMesh = newBSP.toMesh(wall1_mat);
var newMesh = newBSP.toMesh(materialNormal);
scene.add(newMesh);

//wall2
var wall2_geo = new THREE.CubeGeometry(130, 100, 10); // サイズ設定（x, y, z）
var wall2_mat = new THREE.MeshPhongMaterial({color: 'orange'});
var wall2_mesh = new THREE.Mesh(wall2_geo, wall2_mat);
wall2_mesh.position.set(10, 50, -60);  // 位置を設定(x, y, z)
var wall2_bsp = new ThreeBSP(wall2_mesh);

var wall2win_geo = new THREE.CubeGeometry(63, 35, 35); // サイズ設定（x, y, z）
var wall2win_mat = new THREE.MeshPhongMaterial({color: 'orange'});
var wall2win_mesh= new THREE.Mesh(wall2win_geo, wall2win_mat);
wall2win_mesh.position.set(10, 40, -45);  // 位置を設定(x, y, z)
var wall2win_bsp = new ThreeBSP(wall2win_mesh);

var newBSP = wall2_bsp.subtract(wall2win_bsp);
var newMesh = newBSP.toMesh(materialNormal);
scene.add(newMesh);

//wall3
var geometry = new THREE.CubeGeometry(10, 100, 130); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 0x52A2C5});
wall_3 = new THREE.Mesh(geometry, material);
wall_3.position.set(70, 50, 0);  // 位置を設定(x, y, z)
scene.add(wall_3); // シーンに追加


//bed
// 物体を追加する ----------------------------------------
// ジオメトリーの作成
var geometry = new THREE.CubeGeometry(30, 6, 30); // サイズ設定（x, y, z）
// マテリアルの作成
var material = new THREE.MeshPhongMaterial({color: 'green'});
// メッシュの作成
bed = new THREE.Mesh(geometry, material);
bed.position.set(0, 0, 0);  // 位置を設定(x, y, z)

//bed_parts
var geometry = new THREE.CubeGeometry(1, 15, 30); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 'black'});
bed_p = new THREE.Mesh(geometry, material);
bed_p.position.set(15, 0, 0);  // 位置を設定(x, y, z)
bed.add(bed_p);

//pillow
var geometry = new THREE.CubeGeometry(3, 2, 5); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 'orange'});
pillow = new THREE.Mesh(geometry, material);
pillow.position.set(10, 4, 0);  // 位置を設定(x, y, z)
bed.add(pillow);

//mat
var geometry = new THREE.CubeGeometry(15, .1, 30); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 'pink'});
mat = new THREE.Mesh(geometry, material);
mat.position.set(-25, -2.5, 0);  // 位置を設定(x, y, z)
bed.add(mat);

//deskside cavin
var geometry = new THREE.CubeGeometry(14, 15, 20); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 'red'});
b_cavin = new THREE.Mesh(geometry, material);
b_cavin.position.set(-42, 8, 49);  // 位置を設定(x, y, z)
scene.add(b_cavin); // シーンに追加

//bedside cavin
var geometry = new THREE.CubeGeometry(14, 15, 20); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 'black'});
b_cavin = new THREE.Mesh(geometry, material);
b_cavin.position.set(60, 7, -36);  // 位置を設定(x, y, z)
scene.add(b_cavin); // シーンに追加

//book shelf
var bookshelf_geo = new THREE.CubeGeometry(8, 15, 15); // サイズ設定（x, y, z）
var bookshelf_mat = new THREE.MeshPhongMaterial({color: 'yellow'});
var bookshelf_mesh = new THREE.Mesh(bookshelf_geo, bookshelf_mat);
bookshelf_mesh.position.set(61, 8, 40);  // 位置を設定(x, y, z)
var bookshelf_bsp = new ThreeBSP(bookshelf_mesh);

var rec1_geo = new THREE.CubeGeometry(5, 4, 13); // サイズ設定（x, y, z）
var rec1_mat = new THREE.MeshPhongMaterial({color: 'purple'});
var rec1_mesh= new THREE.Mesh(rec1_geo, rec1_mat);
rec1_mesh.position.set(58, 13, 40);  // 位置を設定(x, y, z)
var rec1_bsp = new ThreeBSP(rec1_mesh);

var rec2_geo = new THREE.CubeGeometry(5, 4, 13); // サイズ設定（x, y, z）
var rec2_mat = new THREE.MeshPhongMaterial({color: 'purple'});
var rec2_mesh= new THREE.Mesh(rec2_geo, rec2_mat);
rec2_mesh.position.set(58, 8, 40);  // 位置を設定(x, y, z)
var rec2_bsp = new ThreeBSP(rec2_mesh);

var rec3_geo = new THREE.CubeGeometry(5, 4, 13); // サイズ設定（x, y, z）
var rec3_mat = new THREE.MeshPhongMaterial({color: 'purple'});
var rec3_mesh= new THREE.Mesh(rec3_geo, rec3_mat);
rec3_mesh.position.set(58, 3, 40);  // 位置を設定(x, y, z)
var rec3_bsp = new ThreeBSP(rec3_mesh);

var newBSP = bookshelf_bsp.subtract(rec1_bsp);
newBSP = newBSP.subtract(rec2_bsp);
newBSP = newBSP.subtract(rec3_bsp);
var newMesh = newBSP.toMesh(materialNormal);
scene.add(newMesh);

//desk
var geometry = new THREE.CubeGeometry(25, 10, 10); // サイズ設定（x, y, z）
var material = new THREE.MeshPhongMaterial({color: 'yellow'});
cavin = new THREE.Mesh(geometry, material);
cavin.position.set(0, 5, 54);  // 位置を設定(x, y, z)
scene.add(cavin); // シーンに追加

//bedside cylinder
var bedcylinder_geo = new THREE.CylinderGeometry(3, 3, 6, 50);
var bedcylinder_mat = new THREE.MeshPhongMaterial({color: 'white'});
bedcylinder_mesh = new THREE.Mesh(bedcylinder_geo, bedcylinder_mat);
bedcylinder_mesh.position.set(59, 3, 20);  // 位置を設定(x, y, z)
var bedcylinder_bsp = new ThreeBSP(bedcylinder_mesh);

var rec_geo = new THREE.CubeGeometry(15, 4, 3); // サイズ設定（x, y, z）
var rec_mat = new THREE.MeshPhongMaterial({color: 'purple'});
var rec_mesh= new THREE.Mesh(rec_geo, rec_mat);
rec_mesh.position.set(59, 3, 20);  // 位置を設定(x, y, z)
var rec_bsp = new ThreeBSP(rec_mesh);

var rec2_geo = new THREE.CubeGeometry(3, 4, 15); // サイズ設定（x, y, z）
var rec2_mat = new THREE.MeshPhongMaterial({color: 'pink'});
var rec2_mesh= new THREE.Mesh(rec2_geo, rec2_mat);
rec2_mesh.position.set(59, 3, 20);  // 位置を設定(x, y, z)
var rec2_bsp = new ThreeBSP(rec2_mesh);

var newBSP = bedcylinder_bsp.subtract(rec_bsp);
newBSP = newBSP.subtract(rec2_bsp);
var newMesh = newBSP.toMesh(materialNormal);
scene.add(newMesh);

//trash can
var geometry = new THREE.CylinderGeometry(3, 3, 6, 50);
var material = new THREE.MeshPhongMaterial({color: 'white'});
can = new THREE.Mesh(geometry, material);
can.position.set(-25, 3, 49);  // 位置を設定(x, y, z)
scene.add(can); // シーンに追加

bed.position.set(49, 3, 0);  // 位置を設定(x, y, z)
scene.add(bed);

//pictures1
var geometry = new THREE.CubeGeometry(0.5,10,8);
var material = new THREE.MeshPhongMaterial({color: 'white'});
pic_mesh = new THREE.Mesh(geometry, material);
pic_mesh.position.set(65, 25, -10);  // 位置を設定(x, y, z)

//pictures2
var geometry = new THREE.CubeGeometry(0.5,12,8);
var material = new THREE.MeshPhongMaterial({color: 'white'});
var mesh = new THREE.Mesh(geometry, material);
mesh.position.set(0, 0, 10);  // 位置を設定(x, y, z)
pic_mesh.add(mesh); // シーンに追加

//pictures3
var geometry = new THREE.CubeGeometry(0.5,7,6);
var material = new THREE.MeshPhongMaterial({color: 'white'});
var mesh = new THREE.Mesh(geometry, material);
mesh.position.set(0, 2, 20);  // 位置を設定(x, y, z)
pic_mesh.add(mesh); // シーンに追加

//pictures4
var geometry = new THREE.CubeGeometry(0.5,6,5);
var material = new THREE.MeshPhongMaterial({color: 'white'});
var mesh = new THREE.Mesh(geometry, material);
mesh.position.set(0, -5, 20);  // 位置を設定(x, y, z)
pic_mesh.add(mesh); // シーンに追加

//pictures5
var geometry = new THREE.CubeGeometry(0.5,8,5);
var material = new THREE.MeshPhongMaterial({color: 'white'});
var mesh = new THREE.Mesh(geometry, material);
mesh.position.set(0, -1, 28);  // 位置を設定(x, y, z)
pic_mesh.add(mesh); // シーンに追加
scene.add(pic_mesh);



// レンダリング ----------------------------------------
function render() {


  // 回転アニメーションを追加
  requestAnimationFrame(render);
  // シーンとカメラを渡してレンダリング
    renderer.render(scene, camera);
    }
    render();

// カメラコントロール ----------------------------------------
var controls = new THREE.OrbitControls(camera);

</script>

</body>
</html>
